<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>American Hospital Visualization</title>
  
  <!-- Add Libraries-->
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="http://d3js.org/queue.v1.min.js"></script>
  <script src="bootstrap/js/bootstrap.min.js" charset="utf-8"></script>

  <!-- Add stylesheets -->
  <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/myStyle.css">
  
  <!-- Add vis classes--> 
  <script src = "js/mapvis.js"></script>
  <script src= "js/infovis.js"></script>
  <script src= "js/agevis.js"></script>
  <script src= "js/racevis.js"></script>
  
</head>
<body>
  <div class="container">
    <h1>American Hospital Visualization</h1>
    <div class="row">
      <div class="col-md-8" id="map_vis">
        <svg width = "800" height="500">
        This space is for the Visualization Map
      </div>
      <div class="col-md-4">
        <svg width = "400" height="500" id="hospital_info">
        This space is for the Hospital Info
      </div> 
    </div>
    <div class="row">
      <div class="col-md-8">
        <svg width = "800" height="500" id="spending_hist">
        This space is for the Spending Histogram
      </div>
      <div class="col-md-4">
        <svg width = "400" height="500" id="age_vis">
        This space is for the Age Vis
      </div>
    </div> 
    <div class="row">
      <div class="col-md-8">
        <svg width = "800" height="500" id="quality_hist">
        This space is for the Quality Histogram
      </div>
      <div class="col-md-4">
        <svg width = "400" height="500" id="race_vis">
        This space is for the Race Vis
      </div>
    </div> 
    <div class="row">
      <div class="col-md-8">
        <svg width = "800" height="500" id="spending_quality_scatter">
        This space is for the Spending vs Quality Scatterplot
      </div>
      <div class="col-md-4">
        <svg width = "400" height="500" id="income_vis">
        This space is for the Income Vis
      </div>
    </div> 
  </div>

<script>
  $(function(){
    var mapData = [];
    var hosData = [];

    var initVis = function(){
      var MyEventHandler = new Object();
      var map_vis = new MapVis(d3.select("#map_vis"), mapData, hosData, MyEventHandler);
      //var age_vis = new AgeVis(d3.select("#ageVis"), allData)
      // $(MyEventHandler).bind("selectionChanged", function(event, object){
      //   map_vis.onSelectionChange(object);
      // })
    }

    var dataLoaded = function(error, _mapData, _hosData){
      if (!error){
        mapData = _mapData;
        hosData = _hosData;
        initVis();
      }
    }

    var startHere = function(){
      queue()
        .defer(d3.json, 'data/us.json')
        .defer(d3.json, 'data/hospital_final.json')
        .await(dataLoaded);
    }

    //Call startHere() function
    startHere();
  })
</script>
</body>
</html>